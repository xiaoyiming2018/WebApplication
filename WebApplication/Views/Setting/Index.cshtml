@{
    @model IList<Model.Setting>
    @using Model;
    @using BLL;

}
@using AspNetCoreMvcPager;
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="~/js/dist/css/bootstrap-select.min.css" rel="stylesheet" />

    <script src="~/assets/js/lib/bootstrap.min.js"></script>
    <script src="~/js/dist/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript">
        var TempArrCategory = [];//存储option
        var TempArrUnit = [];//存储option
        var TempArrHead = [];//存储option

        $(function () {
            $(".sidebar ul li:nth-of-type(8)").addClass("active open")
            $(".sidebar ul li:nth-of-type(8) ul li:nth-of-type(1)").addClass("active")

            $('#submitUnit').click(function () {
                var unit_length = $('#unit_id option').length;
                var material_unit = $('#material_unit').val();
                if (unit_length > 1) {
                    swal("您输入的单位有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            material_unit: material_unit
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitCategory').click(function () {
                var category_length = $('#category_id option').length;
                var category = $('#category').val();
                if (category_length > 1) {
                    swal("您输入的分类有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            category: category
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitOrderIndex').click(function () {
                var order_index_begin = $('#order_index_begin').val();
                if (order_index_begin == "") {
                    swal("您输入的内容有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            order_index_begin: order_index_begin
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitPurchaseIndex').click(function () {
                var purchase_index_begin = $('#purchase_index_begin').val();
                if (purchase_index_begin == "") {
                    swal("您输入的内容有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            purchase_index_begin: purchase_index_begin
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitDeliverIndex').click(function () {
                var deliver_index_begin = $('#deliver_index_begin').val();
                if (deliver_index_begin == "") {
                    swal("您输入的内容有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            deliver_index_begin: deliver_index_begin
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitHead').click(function () {
                var head_length = $('#head_id option').length;
                var deliver_company_head = $('#deliver_company_head').val();
                if (head_length > 1) {
                    swal("您输入的抬头有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            deliver_company_head: deliver_company_head
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitReturnIndex').click(function () {
                var return_index_begin = $('#return_index_begin').val();
                if (return_index_begin == "") {
                    swal("您输入的内容有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            return_index_begin: return_index_begin
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

            $('#submitDzIndex').click(function () {
                var dz_index_begin = $('#dz_index_begin').val();
                if (dz_index_begin == "") {
                    swal("您输入的内容有误！", "", "error");
                }
                else {
                    $.ajax({
                        type: "POST",
                        url: "/Setting/Edit",
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("XSRF-TOKEN",
                                $('input:hidden[name="__RequestVerificationToken"]').val());
                        },
                        data: {
                            dz_index_begin: dz_index_begin
                        },
                        success: function (msg) {
                            if (msg == "Success") {
                                swal({ title: "执行成功!", text: "", type: "success" },
                                    function () { window.location.href = '/Setting/Index'; });

                            }
                            else {
                                swal("执行失败！", "", "error");
                            }
                        },
                        error: function (msg) {
                            swal("数据获取失败！", "", "error");
                        }
                    });
                }

            });

        });
        
        

        function SelectTipCategory(flag) {
            var TxtObjCategory = document.getElementById("category");
            var SelectObjCategory = document.getElementById("category_id")
            var Arr = []
            with (SelectObjCategory) {
                var SelectHTMLCategory = innerHTML.match(/<[^>]*>/)[0]
                for (i = 0; i < TempArrCategory.length; i++)
                    if (TempArrCategory[i][0].indexOf(TxtObjCategory.value, 0) >= 0 || flag)//若找到以txt的内容开头的，添加option。若flag为true，对下拉框初始化
                        Arr[Arr.length] = "<option value='" + TempArrCategory[i][1] + "'>" + TempArrCategory[i][0] + "</option>"
                innerHTML = SelectHTMLCategory + Arr.join() + "</SELECT>"
            }
        }

        function InitCategory() {
            var SelectObjCategory = document.getElementById("category_id");
            /*先将数据存入数组*/
            with (SelectObjCategory)
            for (i = 0; i < length; i++)
                TempArrCategory[i] = [options[i].text, options[i].value]
        }

        function SelectTipUnit(flag) {
            var TxtObjUnit = document.getElementById("material_unit");
            var SelectObjUnit = document.getElementById("unit_id")
            var Arr = []
            with (SelectObjUnit) {
                var SelectHTMLUnit = innerHTML.match(/<[^>]*>/)[0]
                for (i = 0; i < TempArrUnit.length; i++)
                    if (TempArrUnit[i][0].indexOf(TxtObjUnit.value, 0) >= 0 || flag)//若找到以txt的内容开头的，添加option。若flag为true，对下拉框初始化
                        Arr[Arr.length] = "<option value='" + TempArrUnit[i][1] + "'>" + TempArrUnit[i][0] + "</option>"
                innerHTML = SelectHTMLUnit + Arr.join() + "</SELECT>"
            }
        }
        function InitUnit() {
            var SelectObjUnit = document.getElementById("unit_id");
            /*先将数据存入数组*/
            with (SelectObjUnit)
            for (i = 0; i < length; i++)
                TempArrUnit[i] = [options[i].text, options[i].value]
        }

        function SelectTipHead(flag) {
            var TxtObjHead = document.getElementById("deliver_company_head");
            var SelectObjHead = document.getElementById("head_id")
            var Arr = []
            with (SelectObjHead) {
                var SelectHTMLHead = innerHTML.match(/<[^>]*>/)[0]
                for (i = 0; i < TempArrHead.length; i++)
                    if (TempArrHead[i][0].indexOf(TxtObjHead.value, 0) >= 0 || flag)//若找到以txt的内容开头的，添加option。若flag为true，对下拉框初始化
                        Arr[Arr.length] = "<option value='" + TempArrHead[i][1] + "'>" + TempArrHead[i][0] + "</option>"
                innerHTML = SelectHTMLHead + Arr.join() + "</SELECT>"
            }
        }
        function InitHead() {
            var SelectObjHead = document.getElementById("head_id");
            /*先将数据存入数组*/
            with (SelectObjHead)
            for (i = 0; i < length; i++)
                TempArrHead[i] = [options[i].text, options[i].value]
        }
    </script>
</head>
<body onload="InitCategory(); InitUnit(); InitHead()">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 p-0">
                <div class="page-header">
                    <div class="page-title">
                        <ol class="breadcrumb text-left">
                            <li><a href="/Supplier/Index">主页</a></li>
                            <li><a href="/Setting/Index">后台配置</a></li>
                            <li class="active">常用参数</li>
                        </ol>
                    </div>
                </div>
            </div><!-- /# column -->
        </div><!-- /# row -->
        <div class="main-content">
            <div class="row">
                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>采购物品单位</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-3 control-label">采购物品单位：</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="material_unit" name="material_unit" value="" onkeyup="SelectTipUnit(0)" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitUnit" class="btn btn-primary" style="padding:9px 13px" value="新增" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-3 control-label">现有物品单位：</label>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-12" style="padding-left:30px;padding-right:30px">
                                        <select class="form-control" id="unit_id" name="unit_id" onchange="material_unit.value=options[selectedIndex].text;" size=8>
                                            <option value=""></option>
                                            @{
                                                SettingManager UM = new SettingManager();
                                                List<Setting> uList = UM.SelectConfigList(1);
                                                if (uList.Count > 0)
                                                {
                                                    for (int i = 0; i < uList.Count; i++)
                                                    {
                                                        <!option value="@uList[i].config_list">@uList[i].config_list</!option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->

                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>采购物品分类</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-3 control-label">采购物品类别：</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="category" name="category" value="" onkeyup="SelectTipCategory(0)" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitCategory" class="btn btn-primary" style="padding:9px 13px" value="新增" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-3 control-label">现有物品类别：</label>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-12" style="padding-left:30px;padding-right:30px">
                                        <select class="form-control" id="category_id" name="category_id" onchange="category.value=options[selectedIndex].text;" size=8>
                                            <option value=""></option>
                                            @{
                                                SettingManager SM = new SettingManager();
                                                List<Setting> objList = SM.SelectConfigList(2);
                                                if (objList.Count > 0)
                                                {
                                                    for (int i = 0; i < objList.Count; i++)
                                                    {
                                                        <!option value="@objList[i].config_list">@objList[i].config_list</!option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->


            </div><!-- /# row -->

            <div class="row">
                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>订单号开头设置</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">当前订单号开头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="order_index_old" name="order_index_old" value="@ViewBag.order_index_begin" readonly />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">更新为：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="order_index_begin" name="order_index_begin" value="" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitOrderIndex" class="btn btn-primary" style="padding:9px 13px" value="修改" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">订单号效果预览：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="order_index_view" name="order_index_view" value="@ViewBag.order_index_view" readonly />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->

                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>采购单号开头设置</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">当前购入单号开头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="purchase_index_old" name="purchase_index_old" value="@ViewBag.purchase_index_begin" readonly />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">更新为：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="purchase_index_begin" name="purchase_index_begin" value="" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitPurchaseIndex" class="btn btn-primary" style="padding:9px 13px" value="修改" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">购入单号效果预览：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="purchase_index_view" name="purchase_index_view" value="@ViewBag.purchase_index_view" readonly />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->
            </div><!-- /# row -->

            <div class="row">
                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>出货单号开头设置</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">当前出货单号开头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="deliver_index_old" name="deliver_index_old" value="@ViewBag.deliver_index_begin" readonly />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">更新为：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="deliver_index_begin" name="deliver_index_begin" value="" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitDeliverIndex" class="btn btn-primary" style="padding:9px 13px" value="修改" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">出货单号效果预览：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="deliver_index_view" name="deliver_index_view" value="@ViewBag.deliver_index_view" readonly />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->

                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>退单号开头设置</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">当前退货单号开头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="return_index_old" name="return_index_old" value="@ViewBag.return_index_begin" readonly />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">更新为：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="return_index_begin" name="return_index_begin" value="" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitReturnIndex" class="btn btn-primary" style="padding:9px 13px" value="修改" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">退货单号效果预览：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="return_index_view" name="return_index_view" value="@ViewBag.return_index_view" readonly />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->
            </div>

            <div class="row">
                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>出货公司抬头</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">出货公司抬头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="deliver_company_head" name="deliver_company_head" value="" onkeyup="SelectTipHead(0)" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitHead" class="btn btn-primary" style="padding:9px 13px" value="新增" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">现有出货公司抬头：</label>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-12" style="padding-left:30px;padding-right:30px">
                                        <select class="form-control" id="head_id" name="head_id" onchange="deliver_company_head.value=options[selectedIndex].text;" size=8>
                                            <option value=""></option>
                                            @{
                                                SettingManager DM = new SettingManager();
                                                List<Setting> dList = DM.SelectConfigList(6);
                                                if (dList.Count > 0)
                                                {
                                                    for (int i = 0; i < dList.Count; i++)
                                                    {
                                                        <!option value="@dList[i].config_list">@dList[i].config_list</!option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->

                <div class="col-lg-6">
                    <div class="card alert">
                        <div class="card-header">
                            <h4>对账单号开头设置</h4>
                        </div>
                        <br />
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">当前对账单号开头：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="dz_index_old" name="dz_index_old" value="@ViewBag.dz_index_begin" readonly />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">更新为：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="dz_index_begin" name="dz_index_begin" value="" />
                                    </div>
                                    <div class="col-sm-2">
                                        <input type="button" id="submitDzIndex" class="btn btn-primary" style="padding:9px 13px" value="修改" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-input-normal" class="col-sm-4 control-label">对账单号效果预览：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="dz_index_view" name="dz_index_view" value="@ViewBag.dz_index_view" readonly />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div><!-- /# card -->
                </div><!-- /# column -->
            </div><!-- /# row -->
        </div>
    </div><!-- /# container-fluid -->
</body>
</html>


